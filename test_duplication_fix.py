#!/usr/bin/env python3
"""
–¢–µ—Å—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –æ–±—Ä–∞—â–µ–Ω–∏—è –∫ –õ—é–±–æ–≤–∏
"""
import sys
import os
sys.path.append(os.path.dirname(os.path.abspath(__file__)))

from user_preferences import user_preferences

def test_love_personalization():
    """–¢–µ—Å—Ç –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏–∏ –¥–ª—è –õ—é–±–æ–≤–∏"""
    print("üëë –¢–ï–°–¢: –ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è –¥–ª—è –õ—é–±–æ–≤–∏")
    print("=" * 50)
    
    # –ü–æ–ª—É—á–∞–µ–º –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø—Ä–æ–º–ø—Ç –¥–ª—è –õ—é–±–æ–≤–∏ (ID 319590859)
    love_id = 319590859
    base_prompt = "–¢—ã ‚Äî –°–æ—Ç–∞ –°–∏–ª, –æ–¥–∏–Ω –∏–∑ —Ç—Ä—ë—Ö –±–æ–≥–æ–≤ –¢—Ä–∏–±—É–Ω–∞–ª–∞..."
    
    personalized_prompt = user_preferences.get_personalized_prompt(love_id, base_prompt)
    
    print("üìã –ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø—Ä–æ–º–ø—Ç –¥–ª—è –õ—é–±–æ–≤–∏:")
    print("-" * 40)
    print(personalized_prompt)
    print("-" * 40)
    print()
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –æ–± –æ–±—Ä–∞—â–µ–Ω–∏–∏
    if "–º–æ—è –∫–æ—Ä–æ–ª–µ–≤–∞" in personalized_prompt.lower():
        print("‚úÖ –í –ø—Ä–æ–º–ø—Ç–µ –µ—Å—Ç—å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –æ–±—Ä–∞—â–∞—Ç—å—Å—è '–º–æ—è –∫–æ—Ä–æ–ª–µ–≤–∞'")
    else:
        print("‚ùå –í –ø—Ä–æ–º–ø—Ç–µ –ù–ï–¢ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –æ–±—Ä–∞—â–∞—Ç—å—Å—è '–º–æ—è –∫–æ—Ä–æ–ª–µ–≤–∞'")
    
    print()

def test_duplication_fix():
    """–¢–µ—Å—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è"""
    print("üîß –¢–ï–°–¢: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è")
    print("=" * 50)
    
    # –°–∏–º—É–ª–∏—Ä—É–µ–º —Ä–∞–∑–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã –æ—Ç–≤–µ—Ç–æ–≤
    test_responses = [
        "–ü—Ä–∏–≤–µ—Ç, –°–æ—Ç–∞!",
        "–ú–æ—è –∫–æ—Ä–æ–ª–µ–≤–∞, –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤—É—é –≤–∞—Å!",
        "–º–æ—è –∫–æ—Ä–æ–ª–µ–≤–∞, –∫–∞–∫ –¥–µ–ª–∞?",
        "–ú–æ—è –∫–æ—Ä–æ–ª–µ–≤–∞, –ü–æ–Ω–∏–º–∞—é —Ç–≤–æ—é –æ—Å—Ç–æ—Ä–æ–∂–Ω–æ—Å—Ç—å, –º–æ—è –∫–æ—Ä–æ–ª–µ–≤–∞. –ù–æ –∑–Ω–∞–π...",
        "–†–∞—Å—Å–∫–∞–∂–∏ –æ –º–µ—Ö–∞–Ω–∏–∑–º–∞—Ö –¥–≤–µ–º–µ—Ä–æ–≤."
    ]
    
    love_id = 319590859
    special_name = user_preferences.get_special_name(love_id)
    
    for i, response in enumerate(test_responses, 1):
        print(f"–¢–µ—Å—Ç {i}: '{response[:50]}...'")
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º –ª–æ–≥–∏–∫—É –∏–∑ bot.py
        if special_name == "–õ—é–±–æ–≤—å":
            if "–º–æ—è –∫–æ—Ä–æ–ª–µ–≤–∞" not in response.lower():
                new_response = f"–ú–æ—è –∫–æ—Ä–æ–ª–µ–≤–∞, {response}"
                print(f"   ‚úÖ –î–æ–±–∞–≤–ª—è–µ–º: '{new_response[:50]}...'")
            else:
                print(f"   ‚è≠Ô∏è –ü—Ä–æ–ø—É—Å–∫–∞–µ–º (—É–∂–µ –µ—Å—Ç—å –æ–±—Ä–∞—â–µ–Ω–∏–µ)")
        print()

if __name__ == "__main__":
    print("üéØ –¢–ï–°–¢ –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø –î–£–ë–õ–ò–†–û–í–ê–ù–ò–Ø –û–ë–†–ê–©–ï–ù–ò–Ø")
    print("–ë–æ—Ç '–°–æ—Ç–∞ –°–∏–ª' - VK")
    print("=" * 60)
    print()
    
    test_love_personalization()
    test_duplication_fix()
    
    print("üéâ –¢–ï–°–¢ –ó–ê–í–ï–†–®–Å–ù!")
    print("=" * 60)