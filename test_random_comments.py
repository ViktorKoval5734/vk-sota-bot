#!/usr/bin/env python3
"""
–¢–µ—Å—Ç —Å–∏—Å—Ç–µ–º—ã —Å–ª—É—á–∞–π–Ω—ã—Ö –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ –±–æ—Ç–∞ "–°–æ—Ç–∞ –°–∏–ª"
"""
import sys
import os

# –î–æ–±–∞–≤–ª—è–µ–º —Ç–µ–∫—É—â—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –≤ –ø—É—Ç—å –¥–ª—è –∏–º–ø–æ—Ä—Ç–∞
sys.path.insert(0, os.path.dirname(os.path.abspath(__file__)))

from random_comments import random_comments_manager

def test_comment_triggers():
    """–¢–µ—Å—Ç —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤ –¥–ª—è –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤"""
    
    test_cases = [
        # –¢–µ—Å—Ç—ã –í–ö
        ("–í–ö - –æ—Ç–ª–∏—á–Ω–∞—è —Å–æ—Ü–∏–∞–ª—å–Ω–∞—è —Å–µ—Ç—å", "vk"),
        ("–≤–∫–æ–Ω—Ç–∞–∫—Ç–µ —Å–µ–≥–æ–¥–Ω—è –≥–ª—é—á–∏—Ç", "vk"),
        ("–í–ö–æ–Ω—Ç–∞–∫—Ç–µ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–ª–∏", "vk"),
        
        # –¢–µ—Å—Ç—ã –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–π
        ("–ü—Ä–∏–≤–µ—Ç, –∫–∞–∫ –¥–µ–ª–∞?", "greetings"),
        ("–î–æ–±—Ä—ã–π –¥–µ–Ω—å –≤—Å–µ–º!", "greetings"),
        ("–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ, –¥—Ä—É–∑—å—è", "greetings"),
        ("–•–∞–π, —á—Ç–æ –Ω–æ–≤–æ–≥–æ?", "greetings"),
        
        # –¢–µ—Å—Ç—ã –¥—Ä–µ–≤–Ω–∏—Ö —Å–≤–∏—Ç–∫–æ–≤
        ("–ù–∞—à—ë–ª –¥—Ä–µ–≤–Ω–∏–µ —Å–≤–∏—Ç–∫–∏", "ancient_scrolls"),
        ("–í –¥—Ä–µ–≤–Ω–∏—Ö –∑–∞–ø–∏—Å—è—Ö —Å–∫–∞–∑–∞–Ω–æ", "ancient_scrolls"),
        ("–î—Ä–µ–≤–Ω—è—è –º—É–¥—Ä–æ—Å—Ç—å –≥–ª–∞—Å–∏—Ç", "ancient_scrolls"),
        
        # –¢–µ—Å—Ç—ã –æ–±—ã—á–Ω—ã—Ö —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤
        ("–°–µ–≥–æ–¥–Ω—è —Ä–∞–±–æ—Ç–∞–ª –Ω–∞ –∑–∞–≤–æ–¥–µ", "work"),
        ("–ò–∑—É—á–∞—é –º–µ—Ö–∞–Ω–∏–∑–º—ã –¥–≤–µ–º–µ—Ä–æ–≤", "technology"),
        ("–ò–Ω—Ç–µ—Ä–µ—Å–Ω–∞—è —Ñ–∏–ª–æ—Å–æ—Ñ—Å–∫–∞—è –º—ã—Å–ª—å", "philosophy"),
        
        # –¢–µ—Å—Ç –±–µ–∑ —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤
        ("–ü—Ä–æ—Å—Ç–æ –æ–±—ã—á–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ", None)
    ]
    
    print("üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã —Å–ª—É—á–∞–π–Ω—ã—Ö –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤\n")
    
    for i, (message, expected_category) in enumerate(test_cases, 1):
        print(f"–¢–µ—Å—Ç {i}: '{message}'")
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º, –¥–æ–ª–∂–µ–Ω –ª–∏ –±—ã—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π
        should_comment = random_comments_manager.should_comment(message)
        
        if should_comment:
            # –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π
            comment = random_comments_manager.generate_comment(message)
            if comment:
                print(f"   ‚úÖ –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω: {comment}")
            else:
                print(f"   ‚ùå –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –Ω–µ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω")
        else:
            print(f"   ‚è≠Ô∏è –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è")
        
        print()

def test_cooldown():
    """–¢–µ—Å—Ç —Å–∏—Å—Ç–µ–º—ã –∫—É–ª–¥–∞—É–Ω–∞"""
    print("‚è∞ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã –∫—É–ª–¥–∞—É–Ω–∞\n")
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
    stats = random_comments_manager.get_stats()
    print(f"–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫—É–ª–¥–∞—É–Ω–∞:")
    print(f"  –ú–æ–∂–Ω–æ –∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å: {stats['can_comment']}")
    print(f"  –í—Ä–µ–º—è –¥–æ —Å–ª–µ–¥—É—é—â–µ–≥–æ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è: {stats['next_comment_in']} —Å–µ–∫")
    print()

def test_special_triggers_priority():
    """–¢–µ—Å—Ç –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤"""
    print("üéØ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤\n")
    
    # –°–æ–æ–±—â–µ–Ω–∏–µ —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ —Ç—Ä–∏–≥–≥–µ—Ä–∞–º–∏
    message = "–ü—Ä–∏–≤–µ—Ç! –°–µ–≥–æ–¥–Ω—è —Ä–∞–±–æ—Ç–∞–ª —Å –í–ö –∏ –Ω–∞—à—ë–ª –¥—Ä–µ–≤–Ω–∏–µ —Å–≤–∏—Ç–∫–∏"
    
    print(f"–°–æ–æ–±—â–µ–Ω–∏–µ: '{message}'")
    should_comment = random_comments_manager.should_comment(message)
    
    if should_comment:
        comment = random_comments_manager.generate_comment(message)
        if comment:
            print(f"‚úÖ –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π: {comment}")
        else:
            print(f"‚ùå –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –Ω–µ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω")
    else:
        print(f"‚è≠Ô∏è –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è")
    
    print()

if __name__ == "__main__":
    test_comment_triggers()
    test_cooldown()
    test_special_triggers_priority()
    
    print("üéâ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ!")
    print("\nüìä –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:")
    print("–í–ö —Ç—Ä–∏–≥–≥–µ—Ä—ã: –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–µ–≥–∞—Ç–∏–≤–Ω–æ –Ω–∞ —É–ø–æ–º–∏–Ω–∞–Ω–∏—è –í–ö–æ–Ω—Ç–∞–∫—Ç–µ")
    print("–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏—è: –æ—Ç–≤–µ—á–∞–µ—Ç –≤ —Å—Ç–∏–ª–µ –°–æ—Ç–∞ –°–∏–ª –Ω–∞ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏—è")
    print("–î—Ä–µ–≤–Ω–∏–µ —Å–≤–∏—Ç–∫–∏: —Ä–∞—Å—Å–∫–∞–∑—ã–≤–∞–µ—Ç –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–µ —Ñ–∞–∫—Ç—ã")
    print("–û–±—ã—á–Ω—ã–µ —Ç—Ä–∏–≥–≥–µ—Ä—ã: –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ —Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è")
    print("–ö—É–ª–¥–∞—É–Ω: 60 –º–∏–Ω—É—Ç –º–µ–∂–¥—É –æ–±—ã—á–Ω—ã–º–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏")